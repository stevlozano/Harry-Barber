<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jarry Style</title>
    <!-- Modern Minimalist CSS -->
    <link rel="stylesheet" href="/css/modern-minimalist.css?v=1.0.0">
    <script src="/frontend-cache.js"></script>
    <script src="/update-config.js"></script>
    <!-- font google -->
</head>

<body>
    <!-- navbar -->
    <nav class="navbar">
        <!-- logo -->
        <img class="logo" src="/images/logo/stylejarry.png" alt="Jarry Style">
        <a class="btn-nav" href="">Barbero</a>
        <a class="btn-nav" href="">Reservar</a>
        <!-- Mobile Menu Button -->
        <button class="menu-toggle" id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </nav>
    
    <!-- Mobile Menu Modal -->
    <div class="mobile-menu-modal" id="mobileMenuModal">
        <div class="mobile-menu-content">
            <h3 class="mobile-menu-title">Menú</h3>
            <div class="mobile-menu-options">
                <a class="mobile-menu-btn" href="" id="mobileBarberoBtn">Barbero</a>
                <a class="mobile-menu-btn" href="" id="mobileReservarBtn">Reservar</a>
            </div>
            <button class="mobile-menu-close" id="closeMobileMenu">Cerrar</button>
        </div>
    </div>

    <!-- PIN Modal -->
    <div id="pinModal" class="pin-modal">
        <div class="pin-modal-content">
            <div class="modal-header"></div>
            <h2 id="pinTitle" class="modal-title">Registrar Código PIN</h2>
            <p id="pinSub" class="modal-subtitle">Crea un código de 4 dígitos para acceder al panel.</p>
            <div class="pin-inputs">
                <input type="password" maxlength="1" class="pin-digit" pattern="\d*">
                <input type="password" maxlength="1" class="pin-digit" pattern="\d*">
                <input type="password" maxlength="1" class="pin-digit" pattern="\d*">
                <input type="password" maxlength="1" class="pin-digit" pattern="\d*">
            </div>
            <button class="btn-pin" onclick="handlePinSubmit()">Confirmar</button>
            <p id="pinError" class="modal-error">Código incorrecto</p>
            <button onclick="closePinModal()" class="btn-cancel-modal">Cancelar</button>
        </div>
    </div>

    <!-- Hero Section -->
    <div class="container">
        <img class="image-fondo" src="/images/JERRYSTYLE.png" alt="Jarry Style Background">

        <!-- Glass Card -->
        <div class="card-content-glass">
            <div class="title-container">
                <div class="word-group">
                    <h1 class="title-content">Bienvenidos a JARRY STYLE</h1>
                </div>
            </div>
            <p class="text-content">Esta iniciativa de mejorar la atención mediante esta app/web ayudará al cliente que desee reservar su cita con mayor anticipación y no tener que esperar largas colas.</p>
            <p class="text-content-2">JARRY STYLE lo espera.</p>
        </div>
    </div>

    <!-- Features Section -->
    <div class="card-content-glass-section-1">
        <div class="card-feature">
            <h2 class="card-text">No esperas, te atienden a tu hora</h2>
            <p class="subtitle-card">En Jarry Style Barbería tu tiempo vale. Reservas tu cita y entras directo al sillón, sin filas eternas ni pérdidas de tiempo. Agenda fácil, llega seguro y sal renovado.</p>
        </div>
        <div class="card-feature">
            <h2 class="card-text">Tu estilo no es genérico, es personalizado</h2>
            <p class="subtitle-card">Aquí no hacen cortes "en automático". Analizamos tu rostro, tu estilo y lo que quieres proyectar. Sales con un look que realmente va contigo, no uno más del montón.</p>
        </div>
        <div class="card-feature">
            <h2 class="card-text">No es solo un corte, es una experiencia</h2>
            <p class="subtitle-card">Ambiente cómodo, atención top y barberos que saben lo que hacen. Entras normal… sales con flow, seguridad y presencia. Por eso, el que viene una vez, vuelve.</p>
        </div>
    </div>

    <!-- Map Section -->
    <section class="section-mapa">
        <h2 class="mapa-title">Ubicanos</h2>
        <div class="mapa-barber">
            <iframe class="mapa-ja"
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d246.70218351689226!2d-74.55767967921288!3d-8.378536833161705!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x91a3bd0020999831%3A0xa1ba54cf3f816d6!2sDady%20Barbershop!5e0!3m2!1ses-419!2spe!4v1768448155224!5m2!1ses-419!2spe"
                allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-logo">
            <img class="footer-logo-img" src="/images/logo/stylejarry.png" alt="Jarry Style Logo">
            <p class="footer-logo-text">JARRY STYLE</p>
        </div>

        <p class="footer-quote">"Estilo que se nota, presencia que impone."</p>

        <!-- Social Media -->
        <div class="redes-sociales">
            <a class="redes-sociales-link" href="#">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                </svg>
                Facebook
            </a>
            <a class="redes-sociales-link" href="#">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                    <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                </svg>
                Instagram
            </a>
        </div>
        <p class="footer-copyright">© 2026 Jarry Style. Todos los derechos reservados by Codeol</p>
    </footer>

    <script>
        // CSS Loading Verification
        window.addEventListener('load', function() {
            const cssLink = document.querySelector('link[href="/css/modern-minimalist.css"]');
            if (cssLink && cssLink.sheet) {
                console.log('CSS loaded successfully');
            } else {
                console.error('CSS failed to load');
            }
        });
        
        // Mobile Menu System
        const menuToggle = document.getElementById('menuToggle');
        const mobileMenuModal = document.getElementById('mobileMenuModal');
        const closeMobileMenu = document.getElementById('closeMobileMenu');
        const mobileBarberoBtn = document.getElementById('mobileBarberoBtn');
        const mobileReservarBtn = document.getElementById('mobileReservarBtn');
        
        // Toggle mobile menu
        menuToggle.addEventListener('click', function() {
            const isOpen = mobileMenuModal.style.display === 'flex';
            if (isOpen) {
                closeMobileMenuHandler();
            } else {
                openMobileMenu();
            }
        });
        
        function openMobileMenu() {
            mobileMenuModal.style.display = 'flex';
            menuToggle.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent scrolling
        }
        
        function closeMobileMenuHandler() {
            mobileMenuModal.style.display = 'none';
            menuToggle.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
        }
        
        // Close menu when clicking close button
        closeMobileMenu.addEventListener('click', closeMobileMenuHandler);
        
        // Close menu when clicking outside
        mobileMenuModal.addEventListener('click', function(e) {
            if (e.target === mobileMenuModal) {
                closeMobileMenuHandler();
            }
        });
        
        // Mobile menu button handlers
        mobileBarberoBtn.addEventListener('click', function(e) {
            e.preventDefault();
            closeMobileMenuHandler();
            openBarberAuth(); // Reuse existing barber auth function
        });
        
        mobileReservarBtn.addEventListener('click', function(e) {
            e.preventDefault();
            closeMobileMenuHandler();
            window.location.href = "/pages/calender/calender.html";
        });
        
        // PIN Authentication System
        const pinModal = document.getElementById('pinModal');
        const pinDigits = document.querySelectorAll('.pin-digit');
        const pinTitle = document.getElementById('pinTitle');
        const pinSub = document.getElementById('pinSub');
        const pinError = document.getElementById('pinError');

        let isRegistration = false;

        // Open barber authentication modal
        document.querySelectorAll('.btn-nav')[0].addEventListener('click', function (e) {
            e.preventDefault();
            openBarberAuth();
        });

        function openBarberAuth() {
            const savedPin = localStorage.getItem('barberPin');
            pinError.style.display = 'none';
            clearPinFields();

            if (!savedPin) {
                isRegistration = true;
                pinTitle.textContent = "Registrar Código PIN";
                pinSub.textContent = "Crea un código de 4 dígitos para tu primer ingreso.";
            } else {
                isRegistration = false;
                pinTitle.textContent = "Acceso Barbero";
                pinSub.textContent = "Ingresa tu código de 4 dígitos.";
            }
            pinModal.style.display = 'flex';
            pinDigits[0].focus();
        }

        function closePinModal() {
            pinModal.style.display = 'none';
        }

        function clearPinFields() {
            pinDigits.forEach(input => input.value = '');
        }

        // Auto focus next input
        pinDigits.forEach((input, index) => {
            input.addEventListener('input', (e) => {
                if (e.target.value && index < 3) {
                    pinDigits[index + 1].focus();
                }
            });

            input.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && !e.target.value && index > 0) {
                    pinDigits[index - 1].focus();
                }
            });
        });

        function handlePinSubmit() {
            let pin = "";
            pinDigits.forEach(input => pin += input.value);

            if (pin.length < 4) {
                showError("Ingresa los 4 dígitos");
                return;
            }

            if (isRegistration) {
                localStorage.setItem('barberPin', pin);
                window.location.href = "/pages/admin/panel.html";
            } else {
                const savedPin = localStorage.getItem('barberPin');
                if (pin === savedPin) {
                    window.location.href = "/pages/admin/panel.html";
                } else {
                    showError("Código incorrecto, intenta de nuevo");
                    clearPinFields();
                    pinDigits[0].focus();
                }
            }
        }

        function showError(msg) {
            pinError.textContent = msg;
            pinError.style.display = "block";
        }

        // Reservation button handler
        document.querySelectorAll('.btn-nav')[1].addEventListener('click', function (e) {
            e.preventDefault();
            window.location.href = "/pages/calender/calender.html";
        });

        // PWA Installation
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            // You can add an install button here if needed
            console.log('PWA install available');
        });

        // Register PWA Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>

</html>